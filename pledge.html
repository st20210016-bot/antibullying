<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kindness Pledge â€“ SAIS Anti-Bullying Campaign</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="favicon.png">
</head>
<body class="page">

  <nav class="navbar">
    <div class="nav-logo">
      <a href="index.html"><img src="images.jpeg" alt="SAIS Logo"></a>
      <span>SAIS</span>
    </div>

    <div class="nav-right">
      <ul class="nav-links">
        <li><a href="about.html">About</a></li>
        <li><a href="impact.html">Impact</a></li>
        <li><a href="types.html">Types</a></li>
        <li><a href="stop.html">Stop Bullying</a></li>
        <li><a href="uae.html">UAE Law</a></li>
        <li><a href="kinder.html">Kinder World</a></li>
        <li><a href="policy.html">School Policy</a></li>
        <li><a href="pledge.html" class="active">Pledge</a></li>
        <li><a href="report.html">Report Bullying</a></li>
        <li><a href="admin.html">Admin</a></li>
      </ul>

      <div class="nav-controls">
        <button id="themeToggle" class="nav-toggle-btn">ğŸŒ™ / â˜€</button>
        <button id="langEnBtn" class="nav-toggle-btn active">EN</button>
        <button id="langArBtn" class="nav-toggle-btn">Ø¹</button>
      </div>
    </div>
  </nav>

  <header class="hero fade-up">
    <div class="lang-en">
      <h1>SAIS Kindness Pledge</h1>
      <p>Join the campaign: commit to speak up, be kind, and refuse to tolerate bullying.</p>
    </div>
    <div class="lang-ar">
      <h1>ØªØ¹Ù‡Ù‘Ø¯ Ø§Ù„Ù„Ø·Ù ÙÙŠ SAIS</h1>
      <p>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø­Ù…Ù„Ø©: ØªØ¹Ù‡Ù‘Ø¯ Ø¨Ø£Ù† ØªØ¯Ø§ÙØ¹ Ø¹Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŒ ÙˆØªÙƒÙˆÙ† Ù„Ø·ÙŠÙÙ‹Ø§ØŒ ÙˆØªØ±ÙØ¶ Ø§Ù„ØªÙ†Ù…Ù‘Ø±.</p>
    </div>
  </header>

  <main class="main-content">

    <section class="card fade-up delay-1">
      <div class="pledge-counter">
        <span class="lang-en">
          <span id="pledgeCount">â€“</span> students have already taken the SAIS Kindness Pledge.
        </span>
        <span class="lang-ar">
          <span id="pledgeCountAr">â€“</span> Ø·Ø§Ù„Ø¨Ù‹Ø§ Ù‚Ø¯Ù‘Ù…ÙˆØ§ ØªØ¹Ù‡Ù‘Ø¯ Ø§Ù„Ù„Ø·Ù ÙÙŠ SAIS Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.
        </span>
      </div>

      <div class="columns">
        <div>
          <div class="lang-en">
            <h2>What You Are Pledging</h2>
            <ul>
              <li>To treat others with respect, in person and online.</li>
              <li>To speak up or seek help when you see bullying.</li>
              <li>To refuse to share or like harmful posts or rumours.</li>
              <li>To include others and support students who feel left out.</li>
            </ul>
          </div>
          <div class="lang-ar">
            <h2>Ø¨Ù…Ø§Ø°Ø§ ØªØªØ¹Ù‡Ù‘Ø¯ØŸ</h2>
            <ul>
              <li>Ø£Ù† ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø§Ø­ØªØ±Ø§Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆØ¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</li>
              <li>Ø£Ù† ØªØªØ­Ø¯Ø« Ø£Ùˆ ØªØ·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªØ±Ù‰ Ø§Ù„ØªÙ†Ù…Ù‘Ø±.</li>
              <li>Ø£Ù† ØªØ±ÙØ¶ Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ø¯Ø¹Ù… Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø£Ùˆ Ø´Ø§Ø¦Ø¹Ø§Øª Ù…Ø¤Ø°ÙŠØ©.</li>
              <li>Ø£Ù† ØªØ´Ù…Ù„ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙˆØªØ¯Ø¹Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø°ÙŠÙ† ÙŠØ´Ø¹Ø±ÙˆÙ† Ø¨Ø§Ù„Ø¹Ø²Ù„Ø©.</li>
            </ul>
          </div>
        </div>

        <div>
          <form id="pledgeForm">
            <div class="form-row">
              <label for="pledgeName">Name (optional)</label>
              <input type="text" id="pledgeName" name="name" placeholder="You may leave this blank">
            </div>

            <div class="form-row">
              <label for="pledgeGrade">Grade</label>
              <select id="pledgeGrade" name="grade" required>
                <option value="">Select your grade</option>
                <option>Grade 7</option>
                <option>Grade 8</option>
                <option>Grade 9</option>
                <option>Grade 10</option>
                <option>Grade 11</option>
                <option>Grade 12</option>
              </select>
            </div>

            <div class="form-row">
              <label>
                <input type="checkbox" id="pledgeAgree" required>
                <span class="lang-en">I understand and agree to this pledge.</span>
                <span class="lang-ar">Ø£ÙÙ‡Ù… Ù‡Ø°Ø§ Ø§Ù„ØªØ¹Ù‡Ù‘Ø¯ ÙˆØ£ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡.</span>
              </label>
            </div>

            <button type="submit" class="btn-primary">Take the Pledge</button>

            <p id="pledgeMessage" class="small-note"></p>
          </form>

          <p class="small-note lang-en" style="margin-top:10px;">
            Your name is optional. The number shown above is a shared school counter from our online database.
          </p>
          <p class="small-note lang-ar" style="margin-top:10px;">
            ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©. Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù‡Ùˆ Ø¹Ø¯Ù‘Ø§Ø¯ Ù…Ø´ØªØ±Ùƒ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.
          </p>
        </div>
      </div>
    </section>

  </main>

  <footer>
    Â© 2025 SAIS Anti-Bullying Campaign
  </footer>

  <script>
    // ---- JSONBin configuration (YOU must fill these) ----
    const BIN_ID = '691b514743b1c97be9b38322';          // e.g. "66f1234abcd..."
    const MASTER_KEY = '$2a$10$/HRjC7rGM4sRC4wsfJKDI.T.KHbT8LLqWuBQ9YpXZafxgoQTvPhnW';  // your X-Master-Key
    const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;
    let currentPledgeCount = 0;

    async function loadPledges() {
      try {
        const res = await fetch(BIN_URL, {
          headers: { 'X-Master-Key': MASTER_KEY }
        });
        const data = await res.json();
        currentPledgeCount = (data.record && typeof data.record.pledges === 'number')
          ? data.record.pledges
          : 0;
        document.getElementById('pledgeCount').textContent = currentPledgeCount;
        document.getElementById('pledgeCountAr').textContent = currentPledgeCount;
      } catch (err) {
        console.error('Error loading pledges:', err);
        document.getElementById('pledgeCount').textContent = 'â€“';
        document.getElementById('pledgeCountAr').textContent = 'â€“';
      }
    }

    async function savePledges(newCount) {
      try {
        const res = await fetch(BIN_URL, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
            'X-Master-Key': MASTER_KEY
          },
          body: JSON.stringify({ pledges: newCount })
        });
        await res.json();
      } catch (err) {
        console.error('Error saving pledges:', err);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const themeToggle = document.getElementById('themeToggle');
      const langEnBtn = document.getElementById('langEnBtn');
      const langArBtn = document.getElementById('langArBtn');
      const form = document.getElementById('pledgeForm');
      const messageEl = document.getElementById('pledgeMessage');

      // THEME
      function applyTheme(theme) {
        if (theme === 'dark') document.body.classList.add('dark');
        else document.body.classList.remove('dark');
      }
      const savedTheme = localStorage.getItem('saisTheme') || 'light';
      applyTheme(savedTheme);
      if (themeToggle) {
        themeToggle.textContent = savedTheme === 'dark' ? 'â˜€' : 'ğŸŒ™';
        themeToggle.addEventListener('click', () => {
          const current = document.body.classList.contains('dark') ? 'dark' : 'light';
          const next = current === 'dark' ? 'light' : 'dark';
          localStorage.setItem('saisTheme', next);
          applyTheme(next);
          themeToggle.textContent = next === 'dark' ? 'â˜€' : 'ğŸŒ™';
        });
      }

      // LANGUAGE
      function applyLang(lang) {
        if (lang === 'ar') document.body.classList.add('lang-ar');
        else document.body.classList.remove('lang-ar');

        if (langEnBtn && langArBtn) {
          if (lang === 'ar') {
            langArBtn.classList.add('active');
            langEnBtn.classList.remove('active');
          } else {
            langEnBtn.classList.add('active');
            langArBtn.classList.remove('active');
          }
        }
      }
      const savedLang = localStorage.getItem('saisLang') || 'en';
      applyLang(savedLang);
      if (langEnBtn) langEnBtn.addEventListener('click', () => {
        localStorage.setItem('saisLang', 'en');
        applyLang('en');
      });
      if (langArBtn) langArBtn.addEventListener('click', () => {
        localStorage.setItem('saisLang', 'ar');
        applyLang('ar');
      });

      // Load existing pledge count
      loadPledges();

      // Handle pledge form
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        messageEl.textContent = '';

        // Simple frontend validation
        const grade = document.getElementById('pledgeGrade').value;
        const agree = document.getElementById('pledgeAgree').checked;
        if (!grade || !agree) {
          messageEl.style.color = '#b91c1c';
          messageEl.textContent = 'Please select your grade and agree to the pledge.';
          return;
        }

        const newCount = currentPledgeCount + 1;
        currentPledgeCount = newCount;
        document.getElementById('pledgeCount').textContent = newCount;
        document.getElementById('pledgeCountAr').textContent = newCount;

        messageEl.style.color = '#166534';
        messageEl.textContent = 'Thank you for taking the pledge. Your commitment has been added.';
        form.reset();

        await savePledges(newCount);
      });
    });
  </script>

</body>
</html>
